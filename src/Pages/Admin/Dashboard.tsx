import React, { useEffect, useState } from 'react';
import axiosInstance from '../../api/axiosInstance';

interface DashboardData {
  articales?: number;
  books?: number;
  audios?: number;
  user_subscribe?: number;
  user_views?: number;
  most_view?: any;
}

const Dashboard: React.FC = () => {
  const [data, setData] = useState<DashboardData>({});
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);

  useEffect(() => {
    const fetchDashboardData = async () => {
      try {
        setLoading(true);
        const response = await axiosInstance.get('/admin/home-page');
        setData(response?.data?.data);
        console.log(response?.data?.data)
        setError(null);
      } catch (err) {
        console.error('Error fetching dashboard data:', err);
        setError('فشل في تحميل البيانات');
      } finally {
        setLoading(false);
      }
    };

    fetchDashboardData();
  }, []);

  const statsData = [
    {
      title: 'المقالات المنشورة',
      number: `${data.articales ?? 0} مقالة`,
      icon: <ArticleIcon />
    },
    {
      title: 'الكتب المنشورة',
      number: `${data.books ?? 0} كتاب`,
      icon: <BooksIcon />
    },
    {
      title: 'الحلقات الصوتية',
      number: `${data.audios ?? 0} حلقة بودكاست`,
      icon: <MicIcon />
    },
    {
      title: 'الزوار المسجلين',
      number: `${data.user_subscribe?.toLocaleString() ?? 0} مستخدم`,
      icon: <SearchIcon />
    },
    {
      title: 'إجمالي الزوار',
      number: `${data.user_views?.toLocaleString() ?? 0} زائر`,
      icon: <VisitorsStatIcon />
    },
    {
      title: 'أكثر تصنيف تفاعل',
      number: data?.most_view?.type ?? 'المقالات',
      icon: <InfoStatIcon />
    },
  ];

  if (loading) {
    return (
      <>
        <div className="mb-8">
          <h1 className="text-[32px] font-bold text-primary">ارقام هامة</h1>
        </div>
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
          {[...Array(6)].map((_, index) => (
            <div key={index} className="bg-white rounded-[17px] p-5 flex items-center gap-4">
              <div className="w-[54px] h-[54px] bg-gray-200 rounded-lg animate-pulse"></div>
              <div className="flex-1 space-y-2">
                <div className="h-4 bg-gray-200 rounded w-3/4 animate-pulse"></div>
                <div className="h-3 bg-gray-200 rounded w-1/2 animate-pulse"></div>
              </div>
            </div>
          ))}
        </div>
      </>
    );
  }

  if (error) {
    return (
      <div className="flex items-center justify-center h-64">
        <div className="text-red-500 text-lg">{error}</div>
      </div>
    );
  }

  return (
    <>
      <div className="mb-8">
        <h1 className="text-[32px] font-bold text-primary">ارقام هامة</h1>
      </div>

      {/* Statistics Cards */}
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        {statsData.map((item, index) => (
          <div key={index} className="bg-white rounded-[17px] p-5 flex items-center gap-4">
            <div className="flex-shrink-0">
              {item.icon}
            </div>
            <div className="text-right">
              <p className="text-primary font-bold text-[16px]">{item.title}</p>
              <p className="text-primary text-[14px] font-normal">{item.number}</p>
            </div>
          </div>
        ))}
      </div>
    </>
  );
};

const VisitorsStatIcon = () => (
<svg width="60" height="47" viewBox="0 0 60 47" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M18.0537 23.3637C21.152 23.3637 24.1233 22.1329 26.314 19.9421C28.5048 17.7514 29.7356 14.78 29.7356 11.6818C29.7356 8.58362 28.5048 5.6123 26.314 3.42153C24.1233 1.23076 21.152 0 18.0537 0C14.9555 0 11.9842 1.23076 9.79344 3.42153C7.60267 5.6123 6.37191 8.58362 6.37191 11.6818C6.37191 14.78 7.60267 17.7514 9.79344 19.9421C11.9842 22.1329 14.9555 23.3637 18.0537 23.3637ZM44.6034 23.3637C46.8566 23.3637 49.0176 22.4686 50.6108 20.8753C52.2041 19.282 53.0992 17.121 53.0992 14.8678C53.0992 12.6145 52.2041 10.4536 50.6108 8.86029C49.0176 7.26701 46.8566 6.37191 44.6034 6.37191C42.3501 6.37191 40.1892 7.26701 38.5959 8.86029C37.0026 10.4536 36.1075 12.6145 36.1075 14.8678C36.1075 17.121 37.0026 19.282 38.5959 20.8753C40.1892 22.4686 42.3501 23.3637 44.6034 23.3637ZM6.37191 27.6116C4.68197 27.6116 3.06125 28.2829 1.86629 29.4779C0.671324 30.6729 0 32.2936 0 33.9835V34.3021C0 34.3021 0 46.7273 18.0537 46.7273C36.1075 46.7273 36.1075 34.3021 36.1075 34.3021V33.9835C36.1075 32.2936 35.4362 30.6729 34.2412 29.4779C33.0462 28.2829 31.4255 27.6116 29.7356 27.6116H6.37191ZM44.6034 42.4794C41.5109 42.4794 39.064 42.0588 37.1249 41.3898C38.0424 39.903 38.5692 38.4693 38.8665 37.3118C39.0832 36.4799 39.2204 35.6293 39.2764 34.7715L39.2849 34.5442L39.2871 34.455V33.9835C39.2916 31.632 38.4253 29.3621 36.8551 27.6116H54.3587C55.03 27.6113 55.6948 27.7433 56.315 28C56.9353 28.2567 57.4989 28.6331 57.9736 29.1076C58.4484 29.5822 58.825 30.1456 59.0819 30.7658C59.3389 31.3859 59.4711 32.0506 59.4711 32.7219C59.4711 32.7219 59.4711 42.4794 44.6034 42.4794Z" fill="#007FFF"/>
</svg>

);

const InfoStatIcon = () => (
<svg width="53" height="53" viewBox="0 0 53 53" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M24.895 39.5391H27.8238V23.4306H24.895V39.5391ZM26.3594 19.2628C26.8709 19.2628 27.2995 19.09 27.6451 18.7444C27.9907 18.3988 28.1625 17.9703 28.1606 17.4587C28.1586 16.9471 27.9858 16.5195 27.6422 16.1759C27.2985 15.8322 26.8709 15.6594 26.3594 15.6575C25.8478 15.6555 25.4202 15.8283 25.0766 16.1759C24.7329 16.5234 24.5601 16.952 24.5582 17.4616C24.5562 17.9712 24.729 18.3988 25.0766 18.7444C25.4241 19.09 25.8517 19.2628 26.3594 19.2628ZM26.3682 52.7188C22.7228 52.7188 19.296 52.0276 16.088 50.6451C12.88 49.2608 10.0888 47.3824 7.71451 45.0101C5.34021 42.6378 3.46089 39.8495 2.07653 36.6454C0.692178 33.4413 0 30.0155 0 26.3682C0 22.7208 0.692178 19.2941 2.07653 16.088C3.45894 12.88 5.33436 10.0888 7.7028 7.71451C10.0712 5.34021 12.8604 3.46089 16.0704 2.07653C19.2804 0.692178 22.7071 0 26.3506 0C29.994 0 33.4208 0.692178 36.6307 2.07653C39.8388 3.45894 42.6299 5.33533 45.0042 7.70572C47.3785 10.0761 49.2579 12.8653 50.6422 16.0734C52.0266 19.2814 52.7188 22.7071 52.7188 26.3506C52.7188 29.994 52.0275 33.4208 50.6451 36.6307C49.2627 39.8407 47.3844 42.6319 45.0101 45.0042C42.6358 47.3766 39.8476 49.2559 36.6454 50.6422C33.4432 52.0285 30.0175 52.7207 26.3682 52.7188Z" fill="#007FFF"/>
</svg>

);
export const SearchIcon = ({ ...props }) => {
  return (
      <svg width="55" height="59" viewBox="0 0 55 59" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M30.7218 0C27.1001 0 23.6267 1.43872 21.0658 3.99964C18.5048 6.56057 17.0661 10.0339 17.0661 13.6556C17.0661 17.2773 18.5048 20.7507 21.0658 23.3116C23.6267 25.8726 27.1001 27.3113 30.7218 27.3113C34.3435 27.3113 37.8168 25.8726 40.3778 23.3116C42.9387 20.7507 44.3774 17.2773 44.3774 13.6556C44.3774 10.0339 42.9387 6.56057 40.3778 3.99964C37.8168 1.43872 34.3435 0 30.7218 0ZM47.3304 50.5156C43.6741 52.8473 38.9527 54.148 33.8045 54.5133C33.5476 53.8355 33.1496 53.2199 32.637 52.7074L25.8092 45.8829C26.7965 43.8147 27.3086 41.5518 27.3079 39.26C27.3082 36.2217 26.4077 33.2516 24.7201 30.7252H47.7913C49.6022 30.7252 51.3389 31.4445 52.6193 32.725C53.8998 34.0055 54.6191 35.7422 54.6191 37.553C54.6191 43.3259 51.7754 47.6787 47.3304 50.5156ZM11.9453 51.2087C14.6286 51.2087 17.1071 50.321 19.1008 48.8292L27.8063 57.5346C27.9648 57.6933 28.153 57.8193 28.3601 57.9052C28.5673 57.9912 28.7893 58.0356 29.0136 58.0357C29.2379 58.0359 29.46 57.9919 29.6673 57.9062C29.8746 57.8205 30.0629 57.6948 30.2216 57.5363C30.3803 57.3779 30.5063 57.1897 30.5923 56.9825C30.6782 56.7754 30.7226 56.5533 30.7227 56.329C30.7229 56.1047 30.6789 55.8826 30.5932 55.6753C30.5075 55.4681 30.3818 55.2797 30.2233 55.121L21.5179 46.4155C23.1293 44.2606 23.9661 41.6248 23.893 38.935C23.8198 36.2452 22.8408 33.6589 21.1147 31.5947C19.3885 29.5306 17.0161 28.1095 14.3817 27.5616C11.7473 27.0137 9.00502 27.3711 6.59898 28.5758C4.19295 29.7805 2.26399 31.7621 1.12443 34.1997C-0.0151221 36.6373 -0.298551 39.3881 0.320039 42.0069C0.938628 44.6256 2.42302 46.9589 4.53286 48.6289C6.6427 50.2989 9.25447 51.2079 11.9453 51.2087ZM11.9453 47.7947C9.6817 47.7947 7.51085 46.8955 5.91027 45.295C4.30969 43.6944 3.41049 41.5235 3.41049 39.26C3.41049 36.9964 4.30969 34.8256 5.91027 33.225C7.51085 31.6244 9.6817 30.7252 11.9453 30.7252C14.2088 30.7252 16.3797 31.6244 17.9803 33.225C19.5808 34.8256 20.48 36.9964 20.48 39.26C20.48 41.5235 19.5808 43.6944 17.9803 45.295C16.3797 46.8955 14.2088 47.7947 11.9453 47.7947Z" fill="#007FFF"/>
      </svg>
      

  )
}

export const MicIcon = ({ ...props }) => {
  return (
      <svg width="39" height="53" viewBox="0 0 39 53" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M19.2059 32.9245C16.9195 32.9245 14.9761 32.1242 13.3756 30.5237C11.7751 28.9232 10.9748 26.9798 10.9748 24.6933V8.23112C10.9748 5.94469 11.7751 4.00124 13.3756 2.40074C14.9761 0.800247 16.9195 0 19.2059 0C21.4924 0 23.4358 0.800247 25.0363 2.40074C26.6368 4.00124 27.437 5.94469 27.437 8.23112V24.6933C27.437 26.9798 26.6368 28.9232 25.0363 30.5237C23.4358 32.1242 21.4924 32.9245 19.2059 32.9245ZM16.4622 52.1304V43.6935C11.7065 43.0533 7.77383 40.9269 4.6643 37.3144C1.55477 33.7018 0 29.4948 0 24.6933H5.48741C5.48741 28.4888 6.82542 31.7245 9.50145 34.4006C12.1775 37.0766 15.4123 38.4137 19.2059 38.4119C22.9996 38.41 26.2353 37.072 28.9132 34.3978C31.591 31.7236 32.9281 28.4888 32.9245 24.6933H38.4119C38.4119 29.4948 36.8571 33.7018 33.7476 37.3144C30.638 40.9269 26.7054 43.0533 21.9496 43.6935V52.1304H16.4622Z" fill="#007FFF"/>
      </svg>
      

  )
}
export const BooksIcon = ({ ...props }) => {
  return (
    <svg width="46" height="55" viewBox="0 0 46 55" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M45.42 11.2149C45.2471 11.0741 45.0403 10.9836 44.8215 10.9529C44.6026 10.9223 44.3797 10.9526 44.1763 11.0407L24.383 19.8206C23.5224 20.2047 22.4446 20.3873 21.3382 20.3873C19.7953 20.3936 18.1991 20.0263 17.0865 19.5268C16.7473 19.3808 16.4245 19.1978 16.1235 18.981C16.2068 18.9391 16.3059 18.8943 16.4206 18.8467L34.423 10.8623L37.1072 12.0377V8.60168C37.1105 8.35677 37.0602 8.11422 36.9598 7.8919C36.8594 7.66958 36.7117 7.47316 36.5274 7.31712C36.3559 7.175 36.1498 7.08365 35.9313 7.05294C35.7128 7.02223 35.4902 7.05334 35.2877 7.1429L15.4945 15.9229C14.8839 16.1747 14.3593 16.4854 13.9167 16.9366C13.4048 17.455 13.1139 18.1597 13.1074 18.8971C13.1074 18.9181 13.1135 18.9537 13.1135 18.9537V49.8714L13.1094 49.9134L13.1156 49.9344V49.968H13.1197C13.1607 51.0489 13.6934 51.7374 14.2016 52.2244C15.7998 53.6684 18.484 54.4765 21.3402 54.5185C22.6926 54.5185 24.0654 54.3086 25.3358 53.7503L45.1352 44.9683C45.6577 44.7374 45.9999 44.1644 45.9999 43.5158V12.4994C46.0032 12.2545 45.9528 12.012 45.8524 11.7897C45.7521 11.5673 45.6043 11.3709 45.42 11.2149ZM32.8658 5.3378C32.831 4.87603 32.6445 4.43525 32.3126 4.17078C32.1397 4.02995 31.9329 3.93946 31.7141 3.9088C31.4952 3.87814 31.2723 3.90846 31.0689 3.99656L11.2756 12.7723C10.415 13.1543 9.3352 13.339 8.2308 13.339C6.68791 13.3432 5.09174 12.9759 3.97914 12.4743C3.64011 12.3296 3.31725 12.1481 3.01612 11.9327C3.09944 11.8907 3.19848 11.846 3.31322 11.7984L21.3177 3.81395L24.0019 4.98937V1.55757C24.0049 1.31249 23.9542 1.06983 23.8535 0.847505C23.7528 0.625176 23.6046 0.428849 23.42 0.273009C23.2473 0.132573 23.0409 0.0422997 22.8224 0.0116492C22.604 -0.0190013 22.3815 0.0110989 22.1783 0.0987957L2.38503 8.88084C1.77443 9.13272 1.25193 9.44126 0.807303 9.89464C0.296116 10.4133 0.00591157 11.118 0 11.8551C0 11.8803 0.00614653 11.9138 0.00614653 11.9138V42.9302H0.0102452C0.051225 44.0111 0.583963 44.6996 1.09211 45.1865C2.69033 46.6306 5.3745 47.4366 8.23285 47.4786C9.00906 47.4735 9.78276 47.3877 10.5421 47.2225V18.9516C10.5216 17.4824 11.0953 16.0719 12.1034 15.056C12.8027 14.3631 13.6323 13.8232 14.5417 13.4692L32.8658 5.3378Z" fill="#007FFF"/>
    </svg>
    

  )
}
export const ArticleIcon = ({ ...props }) => {
  return (
    <svg width="53" height="58" viewBox="0 0 53 58" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M18.7422 11.6638C18.7422 10.8296 19.0787 10.0296 19.6778 9.43976C20.2769 8.8499 21.0894 8.51852 21.9366 8.51852H41.1033C41.9505 8.51852 42.763 8.8499 43.3621 9.43976C43.9612 10.0296 44.2977 10.8296 44.2977 11.6638C44.2977 12.498 43.9612 13.298 43.3621 13.8879C42.763 14.4777 41.9505 14.8091 41.1033 14.8091H21.9366C21.0894 14.8091 20.2769 14.4777 19.6778 13.8879C19.0787 13.298 18.7422 12.498 18.7422 11.6638ZM18.7422 21.0997C18.7422 20.4741 18.9946 19.8741 19.4439 19.4317C19.8932 18.9893 20.5026 18.7407 21.138 18.7407H25.1311C25.7665 18.7407 26.3759 18.9893 26.8252 19.4317C27.2745 19.8741 27.5269 20.4741 27.5269 21.0997C27.5269 21.7254 27.2745 22.3254 26.8252 22.7678C26.3759 23.2102 25.7665 23.4587 25.1311 23.4587H21.138C20.5026 23.4587 19.8932 23.2102 19.4439 22.7678C18.9946 22.3254 18.7422 21.7254 18.7422 21.0997ZM18.7422 28.1766C18.7422 27.551 18.9946 26.951 19.4439 26.5086C19.8932 26.0662 20.5026 25.8177 21.138 25.8177H25.1311C25.7665 25.8177 26.3759 26.0662 26.8252 26.5086C27.2745 26.951 27.5269 27.551 27.5269 28.1766C27.5269 28.8023 27.2745 29.4023 26.8252 29.8447C26.3759 30.2871 25.7665 30.5356 25.1311 30.5356H21.138C20.5026 30.5356 19.8932 30.2871 19.4439 29.8447C18.9946 29.4023 18.7422 28.8023 18.7422 28.1766ZM18.7422 36.8262C18.7422 36.2006 18.9946 35.6006 19.4439 35.1582C19.8932 34.7158 20.5026 34.4672 21.138 34.4672H41.9019C42.5373 34.4672 43.1467 34.7158 43.596 35.1582C44.0453 35.6006 44.2977 36.2006 44.2977 36.8262C44.2977 37.4519 44.0453 38.0519 43.596 38.4943C43.1467 38.9367 42.5373 39.1852 41.9019 39.1852H21.138C20.5026 39.1852 19.8932 38.9367 19.4439 38.4943C18.9946 38.0519 18.7422 37.4519 18.7422 36.8262ZM33.5548 17.9544C33.3695 17.9544 33.1108 17.9544 32.8776 17.9733C32.4563 18.0014 32.0448 18.1115 31.6669 18.2973C31.0659 18.5988 30.5772 19.08 30.2709 19.6718C30.0282 20.1435 29.9643 20.5839 29.9419 20.8638C29.9227 21.0934 29.9227 21.3482 29.9227 21.5306V26.9594C29.9227 27.1418 29.9227 27.3966 29.9419 27.6262C29.9643 27.903 30.0282 28.3465 30.2709 28.8183C30.5772 29.4101 31.0659 29.8912 31.6669 30.1928C32.1461 30.4318 32.5933 30.4947 32.8776 30.5167C33.1108 30.5356 33.3695 30.5356 33.5548 30.5356H40.6657C40.8509 30.5356 41.1097 30.5356 41.3429 30.5167C41.624 30.4947 42.0744 30.4318 42.5536 30.1928C43.1546 29.8912 43.6433 29.4101 43.9496 28.8183C44.1382 28.4463 44.25 28.0411 44.2786 27.6262C44.2977 27.3966 44.2977 27.1418 44.2977 26.9594V21.5306C44.2977 21.3482 44.2977 21.0934 44.2786 20.8638C44.25 20.449 44.1382 20.0438 43.9496 19.6718C43.6433 19.08 43.1546 18.5988 42.5536 18.2973C42.1757 18.1115 41.7642 18.0014 41.3429 17.9733C41.1097 17.9544 40.8509 17.9544 40.6657 17.9544H33.5548Z" fill="#007FFF"/>
    <path d="M40.2673 0H22.1502C20.4377 0 19.0133 -8.74131e-08 17.845 0.093859C16.6287 0.187718 15.4891 0.400465 14.4104 0.938591C12.7538 1.76352 11.4069 3.07997 10.563 4.69921C10.0124 5.75356 9.79475 6.86736 9.69872 8.05624C9.60269 9.19819 9.60269 10.5904 9.60269 12.2643V43.8009H2.40067C1.76398 43.8009 1.15335 44.0481 0.703141 44.4882C0.252927 44.9282 0 45.5251 0 46.1474C0 51.4129 1.83091 54.5321 4.16117 56.2372C5.36474 57.1141 6.78122 57.6694 8.27112 57.8485C8.43709 57.8653 8.60366 57.8757 8.77046 57.8798C16.6031 57.9486 24.4389 57.9267 32.2715 57.9017C36.1851 57.8892 40.0987 57.8819 44.0123 57.8798C44.2364 57.8798 44.4498 57.8516 44.6525 57.7953C45.8785 57.6889 46.9732 57.4574 48.0103 56.9412C49.6652 56.1165 51.0109 54.8013 51.8545 53.1837C52.4051 52.1262 52.6228 51.0124 52.7188 49.8235C52.8148 48.6816 52.8148 47.2893 52.8148 45.6187V12.2643C52.8148 10.5904 52.8148 9.19819 52.7188 8.05624C52.6228 6.86736 52.4051 5.75356 51.8545 4.69921C51.0122 3.08093 49.6677 1.76458 48.0135 0.938591C46.9316 0.400465 45.792 0.187718 44.5757 0.093859C43.4074 -8.74131e-08 41.9798 0 40.2673 0ZM43.7659 53.1462L43.5962 53.1117C43.1115 52.9895 42.6559 52.7759 42.2551 52.4829C41.3844 51.8446 40.0144 50.2678 40.0144 46.1474C40.0144 45.5251 39.7615 44.9282 39.3113 44.4882C38.8611 44.0481 38.2505 43.8009 37.6138 43.8009H14.404V12.3581C14.404 10.5685 14.404 9.36401 14.4841 8.43793C14.5577 7.54001 14.6921 7.11139 14.8394 6.82981C15.2232 6.09275 15.8362 5.4936 16.5903 5.11845C16.8783 4.97453 17.3169 4.84313 18.2355 4.77117C19.183 4.69608 20.4121 4.69296 22.2462 4.69296H40.1713C42.0022 4.69296 43.2345 4.69296 44.1788 4.77117C45.1007 4.84313 45.5392 4.97453 45.8273 5.11845C46.5827 5.49389 47.194 6.09146 47.5781 6.82981C47.7254 7.11139 47.8598 7.54001 47.9334 8.43793C48.0103 9.36401 48.0135 10.5654 48.0135 12.3581V45.5217C48.0135 47.3112 48.0135 48.5158 47.9334 49.4387C47.8598 50.3398 47.7254 50.7684 47.5781 51.05C47.1943 51.787 46.5813 52.3862 45.8273 52.7613C45.3727 52.9866 44.883 53.0961 43.7659 53.1462Z" fill="#007FFF"/>
    </svg>
    
  )
}
export default Dashboard;
